<app-loader *ngIf = "loading"></app-loader>
<div class="container" *ngIf = "!loading">

    <form action="#" [formGroup]="settingsBig" >

      <h4>Управление большим бассейном</h4>

      <mat-card class="form-field-container">

        <div class="ios-handler">
          <input
            type="checkbox"
            id="ios-handler"
            [checked]="this.ledBig"
            formControlName="led"
            (change) = "changeLedBig()"
            class="switch"
            hidden>
          <label for="ios-handler" class="switch-label" [class.disabled] = "deviceDisable">
          </label>
          <span>Освещение</span>
        </div>

      </mat-card>

      <mat-card class="form-field-container">

          <p>Температура Дозирующей Станции: <span>{{ tempDesconeBig }}</span></p>

          <p>Нагреватель:<span> {{ relay && relay['R3-heatBig'] ? 'Включен' : 'Выключен' }}</span></p>

          <mat-form-field>
            <input
              type="text"
              matInput
              placeholder="Температура"
              formControlName="temperature"
              [value] = "tempBig">
          </mat-form-field>

          <mat-error *ngIf="settingsBig.controls['temperature'].invalid && settingsBig.controls['temperature'].dirty">
             Температра должна быть задана в интервале от 1 до 50
          </mat-error>

          <mat-form-field>
            <input
              type="text"
              matInput
              placeholder="Гистерезис"
              formControlName="hysteresis"
              [value] = "hystBig">
          </mat-form-field>

          <mat-error *ngIf="settingsBig.controls['hysteresis'].invalid && settingsBig.controls['hysteresis'].dirty">
            Гистерезис должен быть задан в интервале от 0.1 до 3.0
          </mat-error>

          <button mat-raised-button (click) = "changeTemperatureBig()" [disabled]="deviceDisable">Заменить параметры регулирования</button>
      </mat-card>
    </form>

  <form action="#" [formGroup]="settingsGm">

    <h4>Управление г/м бассейном</h4>

    <mat-card class="form-field-container">

      <div class="ios-handler">
        <input
          type="checkbox"
          id="ios-handler-2"
          [checked]="ledGM"
          formControlName="led"
          class="switch"
          (change) = "changeLedGm()"
          hidden>
        <label for="ios-handler-2" class="switch-label" [class.disabled] = "deviceDisable">
        </label>
        <span>Освещение</span>
      </div>

    </mat-card>

    <mat-card class="form-field-container">

      <p>Температура Дозирующей Станции: <span>{{ tempDesconeGm }}</span></p>

      <p>Нагреватель: <span> {{ relay && relay['R4-heatGM'] ? 'Включен' : 'Выключен' }}</span></p>

        <mat-form-field>
          <input
            type="text"
            matInput
            placeholder="Температура"
            formControlName="temperature"
            [value] = "tempGM">
        </mat-form-field>

        <mat-error *ngIf="settingsGm.controls['temperature'].invalid && settingsGm.controls['temperature'].dirty">
          Температра должна быть задана в интервале от 1 до 50
        </mat-error>


        <mat-form-field>
          <input
            type="text"
            matInput
            placeholder="Гистерезис"
            formControlName="hysteresis"
            [value] = "hystGM">
        </mat-form-field>

        <mat-error *ngIf="settingsGm.controls['hysteresis'].invalid && settingsGm.controls['hysteresis'].dirty">
          Гистерезис должен быть задан в интервале от 0.1 до 3.0
        </mat-error>

        <button mat-raised-button (click) = "changeTemperatureGm()"[disabled]="deviceDisable" >Заменить параметры регулирования</button>

    </mat-card>

  </form>

    <form action="#" class = "sensors">

      <h4>Сигналы тревоги</h4>

      <mat-card class="form-field-container">

        <table>

          <tr class="sensor">
            <td>Датчик затопления</td>
            <td><button mat-mini-fab [color]="alarms && alarms[0]?'basic':'warn'"></button></td>
          </tr>

          <tr class="sensor">
            <td>Герконовый датчик уровня в расходной емкости ph на два бассейна</td>
            <td><button mat-mini-fab [color]="alarms && alarms[1]?'basic':'warn'"></button></td>
          </tr>

          <tr class="sensor">
            <td>Герконовый датчик уровня в расходной емкости Cl для бассейна</td>
            <td><button mat-mini-fab [color]="alarms && alarms[2]?'basic':'warn'"></button></td>
          </tr>

          <tr class="sensor">
            <td>Герконовый датчик уровня в расходной емкости активного кислорода для гидромассажного бассейна</td>
            <td><button mat-mini-fab [color]="alarms && alarms[3]?'basic':'warn'"></button></td>
          </tr>

          <tr class="sensor">
            <td>Сигнал аварии от автоматического 6-ти позиционного вентиля бассейна(Сухой контакт)</td>
            <td><button mat-mini-fab [color]="alarms && alarms[4]?'basic':'warn'"></button></td>
          </tr>

          <tr class="sensor">
            <td>Сигнал аварии от автоматического 6-ти позиционного вентиля г/м бассейна(Сухой контакт)</td>
            <td><button mat-mini-fab [color]="alarms && alarms[5]?'basic':'warn'"></button></td>
          </tr>

          <tr class="sensor">
            <td>Сигнал нижний/верхний датчик уровня воды емкости бассейна(Сухой контакт)</td>
            <td><button mat-mini-fab [color]="alarms && alarms[6]?'basic':'warn'"></button></td>
          </tr>

          <tr class="sensor">
            <td>Сигнал нижний/верхний датчик уровня воды емкости г/м бассейна(Сухой контакт)</td>
            <td><button mat-mini-fab [color]="alarms && alarms[7]?'basic':'warn'"></button></td>
          </tr>

          <tr class="sensor">
            <td>Сигнал тревоги резерв</td>
            <td><button mat-mini-fab [color]="alarms && alarms[8]?'basic':'warn'"></button></td>
          </tr>

        </table>

      </mat-card>

    </form>

  <form action="#">

    <h4>Система водоподготовки</h4>

    <mat-card class="form-field-container">

      <p>Водоподготовка: <span>{{ relay && relay['R5-water'] ? 'Включена' : 'Выключена'}}</span></p>

      <p>Настройки режима</p>

      <select [(ngModel)]="selectedValue" name="mode" (change)="changeMode(selectedValue)" [disabled]="deviceDisable" >
        <option *ngFor="let mode of modes" [value]="mode">{{mode}}</option>
      </select>

    </mat-card>

    <h4>Включение резервного реле</h4>
    <mat-card class="form-field-container">

      <div class="ios-handler">
        <input
          type="checkbox"
          id="ios-handler-3"
          class="switch"
          [checked]="relay && relay['R6-reserve']"
          (change) = "changeRelay()"
          hidden>
        <label for="ios-handler-3" class="switch-label" [class.disabled] = "deviceDisable">
        </label>
        <span>Включение резервного реле</span>
      </div>


    </mat-card>
  </form>


</div>
